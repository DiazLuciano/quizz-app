"use strict";(self.webpackChunkquizz_app=self.webpackChunkquizz_app||[]).push([[130],{1130:(L,g,o)=>{o.r(g),o.d(g,{PlayModule:()=>R});var d=o(6895),l=o(6159),a=o(4006),m=o(727),t=o(4650),f=o(387),v=o(6481),u=o(430),z=o(9101),_=o(9549),C=o(284);const Q=function(){return["/"]};function S(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"section",1)(1,"form",2)(2,"div",3)(3,"div",4)(4,"mat-form-field",5)(5,"mat-label"),t._uU(6),t.ALo(7,"uppercase"),t.qZA(),t._UZ(8,"input",6),t.qZA()()(),t.TgZ(9,"div",3)(10,"div",7)(11,"button",8),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.setName())}),t._uU(12),t.ALo(13,"uppercase"),t.qZA()()()(),t.TgZ(14,"div",9)(15,"button",10),t._uU(16),t.ALo(17,"uppercase"),t.qZA()()()}if(2&n){const e=s.$implicit,i=t.oxw();t.xp6(1),t.Q6J("formGroup",i.form),t.xp6(5),t.Oqu(t.lcZ(7,6,e("placeholder"))),t.xp6(5),t.Q6J("disabled",i.form.invalid),t.xp6(1),t.Oqu(t.lcZ(13,8,e("buttonStart"))),t.xp6(3),t.Q6J("routerLink",t.DdM(12,Q)),t.xp6(1),t.Oqu(t.lcZ(17,10,e("buttonBack")))}}let O=(()=>{class n{constructor(e,i,r,c,h){this._router=e,this._playService=i,this._notificationService=r,this._translationService=c,this._formBuilder=h,this.playerName="",this.subscriptionTranslation=new m.w0,this.form=this._formBuilder.group({playerName:["",[a.kI.required,a.kI.minLength(2),a.kI.maxLength(30)]]})}ngOnInit(){this.subscriptionTranslation=this._translationService.selectTranslate("validateMsg").subscribe(e=>{this.validateMsg=e})}ngOnDestroy(){this.subscriptionTranslation.unsubscribe()}validateRefresh(){return void 0!==this._playService.validateQuizzRefresh()||(this._notificationService.showError("",this.validateMsg),this._router.navigate(["/"]),!1)}setName(){this.form.invalid||this.validateRefresh()&&(this._playService.playerName=this.form.get("playerName")?.value,this._router.navigate(["/play/counter"]))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.F0),t.Y36(f.P),t.Y36(v.g),t.Y36(u.Vn),t.Y36(a.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-input-player-name"]],decls:1,vars:1,consts:[["class","animate__animated animate__fadeInLeft",4,"transloco","translocoRead"],[1,"animate__animated","animate__fadeInLeft"],[3,"formGroup"],[1,"row","d-flex","justify-content-center"],[1,"col-lg-4","text-center"],["appearance","fill"],["matInput","","type","text","formControlName","playerName","maxlength","30","required","",1,"capital"],[1,"col-lg-4"],["mat-raised-button","","color","primary","type","submit",1,"main-button",3,"disabled","click"],[1,"text-center","mt-5"],["type","button",1,"btn","btn-outline-secondary","btn-lg",3,"routerLink"]],template:function(e,i){1&e&&t.YNc(0,S,18,13,"section",0),2&e&&t.Q6J("translocoRead","inputPlayerName")},dependencies:[l.rH,z.lW,_.KE,_.hX,C.Nt,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.nD,a.sg,a.u,u.KI,d.gd],styles:["section[_ngcontent-%COMP%]{height:100vh;display:flex;flex-direction:column;justify-content:center}mat-form-field[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{width:100%;text-align:center;font-size:20px}"]}),n})();var P=o(5861);let y=(()=>{class n{constructor(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-counter"]],inputs:{size:"size",seconds:"seconds"},decls:2,vars:4,template:function(e,i){1&e&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&e&&(t.Tol(i.size),t.xp6(1),t.Oqu(i.seconds))},styles:[".counter[_ngcontent-%COMP%]{font-weight:700}.small[_ngcontent-%COMP%]{font-size:1rem}.medium[_ngcontent-%COMP%]{font-size:2rem}.large[_ngcontent-%COMP%]{font-size:3rem}.big[_ngcontent-%COMP%]{font-size:5rem}"]}),n})(),I=(()=>{class n{constructor(e,i,r,c){this._router=e,this._playService=i,this._notificationService=r,this._translationService=c,this.seconds=3,this.susbscriptionTranslation=new m.w0}ngOnInit(){this.susbscriptionTranslation=this._translationService.selectTranslate("validateMsg").subscribe(e=>{this.validateMsg=e,this.validateRefresh().then(i=>{i||(this._notificationService.showError("",e),this._router.navigate(["/"])),this.setCounter()})})}ngOnDestroy(){this.susbscriptionTranslation.unsubscribe(),clearInterval(this.intervalCounter)}validateRefresh(){var e=this;return(0,P.Z)(function*(){if(void 0!==e._playService.validateQuizzRefresh()){const r=e._playService.playerName;if(void 0!==r||""!==r)return!0}return!1})()}setCounter(){this.intervalCounter=setInterval(()=>{1===this.seconds&&this._router.navigate(["/play/play-quizz"]),this.seconds=this.seconds-1},1e3)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.F0),t.Y36(f.P),t.Y36(v.g),t.Y36(u.Vn))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-counter-quizz"]],decls:3,vars:1,consts:[[1,"container"],[1,"animate__animated","animate__bounceIn"],[1,"counter",3,"seconds"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"app-counter",2),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("seconds",i.seconds))},dependencies:[y],styles:[".container[_ngcontent-%COMP%]{height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center}.counter[_ngcontent-%COMP%]{font-size:7.5rem!important;font-weight:700}"]}),n})();var p=o(3546),T=o(4850),x=o(6338),w=o(4984);function b(n,s){1&n&&(t.TgZ(0,"div",4),t._UZ(1,"app-spinner"),t.qZA())}function A(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"mat-list-option",15),t.NdJ("click",function(){const r=t.CHM(e),c=r.$implicit,h=r.index,j=t.oxw(4);return t.KtG(j.selectedAnswer(c,h))}),t._uU(1),t.qZA()}if(2&n){const e=s.$implicit;t.xp6(1),t.hij(" ",e.description," ")}}function Z(n,s){if(1&n&&(t.TgZ(0,"mat-selection-list",13),t.YNc(1,A,2,1,"mat-list-option",14),t.qZA()),2&n){const e=t.oxw(3);t.Q6J("multiple",!1),t.xp6(1),t.Q6J("ngForOf",e.quizz.listQuestions[e.indexQuestion].listAnswers)}}function q(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",5)(1,"div",6)(2,"mat-card")(3,"mat-card-header",7)(4,"mat-card-title",8),t._UZ(5,"app-counter",9),t.qZA(),t.TgZ(6,"mat-card-title",10),t._uU(7),t.qZA()(),t._UZ(8,"mat-divider"),t.TgZ(9,"mat-card-content"),t.YNc(10,Z,2,2,"mat-selection-list",11),t.qZA(),t.TgZ(11,"mat-card-actions")(12,"button",12),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.next())}),t._uU(13),t.ALo(14,"uppercase"),t.qZA()()()()()}if(2&n){const e=t.oxw().$implicit,i=t.oxw();t.xp6(5),t.Q6J("seconds",i.seconds),t.xp6(2),t.Oqu(i.getTitle()),t.xp6(3),t.Q6J("ngIf",void 0!==i.quizz.listQuestions),t.xp6(2),t.Q6J("disabled",void 0===i.selectedOption),t.xp6(1),t.Oqu(t.lcZ(14,5,e("buttonNext")))}}function M(n,s){if(1&n&&(t.TgZ(0,"section",1),t.YNc(1,b,2,0,"div",2),t.YNc(2,q,15,7,"div",3),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading)}}const J=[{path:"",component:O},{path:"counter",component:I,pathMatch:"full"},{path:"play-quizz",component:(()=>{class n{constructor(e,i,r,c){this._playService=e,this._translationService=i,this._router=r,this._notificationService=c,this.loading=!1,this.correctOnes=0,this.IncorrectOnes=0,this.totalScore=0,this.listUserAnswers=[],this.counter=8,this.indexQuestion=0,this.subscriptionTranslation=new m.w0,this.validateRefresh()||this._router.navigate(["/"]),this.quizz=this._playService.quizz,this.playerName=this._playService.playerName}ngOnInit(){this.subscriptionTranslation=this._translationService.selectTranslateObject("playQuizz").subscribe(e=>{this.saveSuccess=e.saveSuccess,this.saveFail=e.saveFail}),this.initCounter()}ngOnDestroy(){clearInterval(this.setInterval),this.subscriptionTranslation.unsubscribe()}getSeconds(){return this.seconds}getQuestionTitle(){return this.quizz.listQuestions[this.indexQuestion].title}initCounter(){void 0!==this.quizz.listQuestions&&(this.seconds=this.quizz.listQuestions[this.indexQuestion].seconds,this.setInterval=setInterval(()=>{this.seconds=this.seconds-1,this.seconds<0&&this.next()},1e3))}validateRefresh(){return void 0!==this._playService.validateQuizzRefresh()}next(){clearInterval(this.setInterval),this.addSelectedAnswer(),this.initCounter()}addSelectedAnswer(){this.checkCounterForCorrectAndIncorrect();const e={title:this.quizz.listQuestions[this.indexQuestion].title,score:this.getQuestionPoints(),seconds:this.getWaitedSeconds(),indexSelectedAnswer:this.getSelectedIndex(),listAnswers:this.quizz.listQuestions[this.indexQuestion].listAnswers};this.listUserAnswers.push(e),this.selectedOption=void 0,this.indexSelected=void 0,this.quizz.listQuestions.length-1===this.indexQuestion?this.saveUserAnswersQuestionnaire():(this.indexQuestion++,this.seconds=this.quizz.listQuestions[this.indexQuestion].seconds)}checkCounterForCorrectAndIncorrect(){void 0!==this.selectedOption&&this.selectedOption.isCorrect?this.correctOnes++:this.IncorrectOnes++}getTitle(){return this.quizz.listQuestions[this.indexQuestion].title}getSelectedIndex(){return void 0===this.selectedOption?"":this.indexSelected}getQuestionPoints(){if(void 0===this.selectedOption)return 0;const e=this.quizz.listQuestions[this.indexQuestion].score;return 1==this.selectedOption.isCorrect?(this.totalScore=this.totalScore+e,e):0}getWaitedSeconds(){return void 0===this.selectedOption?"NOT ANSWER":(this.quizz.listQuestions[this.indexQuestion].seconds-this.seconds).toString()}selectedAnswer(e,i){this.selectedOption=e,this.indexSelected=i}saveUserAnswersQuestionnaire(){this.loading=!0;const e={idQuestionnaire:this.quizz.id,playerName:this.playerName,date:new Date,numberQuestions:this.quizz.numberQuestions,numberCorrectOnes:this.correctOnes,numberIncorrectOnes:this.IncorrectOnes,listUserAnswers:this.listUserAnswers,score:this.totalScore};this._playService.setPlayerAnswersQuestionnaire(e).then(i=>{this._notificationService.showSuccess("",this.saveSuccess),this._router.navigate(["/play/quizz-result/"+i.id])}).catch(i=>{console.log(i),this._notificationService.showError(this.saveFail,"Oops"),this._router.navigate(["/"])}).finally(()=>{this.loading=!1})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.P),t.Y36(u.Vn),t.Y36(l.F0),t.Y36(v.g))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-play-quizz"]],decls:1,vars:1,consts:[["class","animate__animated animate__fadeInLeft",4,"transloco","translocoRead"],[1,"animate__animated","animate__fadeInLeft"],["class","d-flex justify-content-center",4,"ngIf"],["class","row d-flex justify-content-center",4,"ngIf"],[1,"d-flex","justify-content-center"],[1,"row","d-flex","justify-content-center"],[1,"col-lg-8"],[1,"justify-content-center"],[1,"text-center"],[1,"fw-bolder","display-3",3,"seconds"],[1,"question","capital","mt-3"],[3,"multiple",4,"ngIf"],["mat-raised-button","","color","primary","type","button",1,"main-button",3,"disabled","click"],[3,"multiple"],["class","capital answer text-center",3,"click",4,"ngFor","ngForOf"],[1,"capital","answer","text-center",3,"click"]],template:function(e,i){1&e&&t.YNc(0,M,3,2,"section",0),2&e&&t.Q6J("translocoRead","playQuizz")},dependencies:[d.sg,d.O5,p.a8,p.dk,p.dn,p.n5,p.hq,z.lW,T.d,x.Ub,x.vS,w.O,y,u.KI,d.gd],styles:["section[_ngcontent-%COMP%]{height:100vh;display:flex;flex-direction:column;justify-content:center}.counter[_ngcontent-%COMP%]{font-size:5rem;font-weight:700}.question[_ngcontent-%COMP%]{font-size:1.7rem}.answer[_ngcontent-%COMP%]{font-size:1.5rem}"]}),n})(),pathMatch:"full"},{path:"quizz-result/:id",component:o(2060).f,pathMatch:"full"}];let Y=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.Bz.forChild(J),l.Bz]}),n})();var U=o(9913);let R=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[d.ez,Y,U.m,u.y4]}),n})()}}]);